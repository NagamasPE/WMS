{"ast":null,"code":"import _slicedToArray from\"C:/Users/nagam/Documents/GitHub/wms_client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useParams}from\"react-router-dom\";import\"./css/Master.css\";import{InputForm,myFunction}from'./InputForm';import{jsx as _jsx}from\"react/jsx-runtime\";var Master=function Master(props){var TableQuery={recipe:{query:\"select p.recipe_id,p.produk_id,p.material_id,pr.deskripsi produk,no,m.deskripsi material,spec from recipe p left join produk pr on p.produk_id=pr.produk_id left join material m on p.material_id=m.material_id order by pr.deskripsi,p.no\"},penimbangan_to:{query:\"select p.*,pr.deskripsi produk,op.deskripsi operator,g.deskripsi grup from penimbangan_to p left join produk pr on p.produk_id=pr.produk_id left join grup g on p.grup_id=g.grup_id left join operator op on p.operator_id=op.operator_id\",detailquery:{config:[\"bisa_tambah\"],fieldname:\"produk\",query:\"select deskripsi material,spec,''actual,''lot_no from recipe p left join material m on p.material_id=m.material_id where p.produk_id=@ID order by no\",textbox:[\"material\",\"spec\",\"actual\",\"lot_no\"],pilih:{spec:\"select *,deskripsi lot_no from produk\"}}},planning:{query:\"select pr.deskripsi produk,p.* from planning p left join produk pr on p.produk_id=pr.produk_id\"},material_masuk:{query:\"select * from material_masuk \",detailquery:{fieldname:\"material_masuk_detail\",query:\"select p.material_id,m.deskripsi material,lot_no,value from material_masuk_detail p left join material m on p.material_id=m.material_id where material_masuk_detail_id=@ID\",config:[\"bisa_tambah\"],textbox:[\"material\",\"lot_no\",\"value\"],pilih:{contoh:\"select *,deskripsi lot_no from produk\"}},pilih:{contoh:\"select * from contoh\"}}};var ServerAddr=window.location.hostname;var defTable={col:[{name:'empty'}],val:[{empty:''}]};var _useState=useState({empty:''}),_useState2=_slicedToArray(_useState,2),inputOut=_useState2[0],setInputOut=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),ShowDetail=_useState4[0],setShowDetail=_useState4[1];var _useState5=useState(defTable),_useState6=_slicedToArray(_useState5,2),Table_data=_useState6[0],setTable_Data=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),nilai=_useState8[0],setNilai=_useState8[1];var _useState9=useState(defTable),_useState10=_slicedToArray(_useState9,2),Table_detail=_useState10[0],setTable_Detail=_useState10[1];var params=useParams();var selectquery=\"select * from \".concat(params.tipe);var PilihQuery;var detailQuery;if(params.tipe in TableQuery){if(TableQuery[params.tipe].query){selectquery=TableQuery[params.tipe].query;}if(TableQuery[params.tipe].pilih){PilihQuery=TableQuery[params.tipe].pilih;}if(TableQuery[params.tipe].detailquery){detailQuery=TableQuery[params.tipe].detailquery;}}function checkColumnHasID(name,table){var adaID=false;table.col.forEach(function(coldef){if(name+\"_id\"===coldef.name){adaID=true;}});return adaID;}function TriggerRender(){var cnt=0;cnt=nilai+1;setNilai(cnt);}var generateData=function generateData(){fetch('http://'+ServerAddr+':3001/exec/'+selectquery).then(function(response){return response.json();}).then(function(data){if(data){if(\"err\"in data){alert(data.err);}else{setTable_Data(data);}}});};if(Table_data.col){if(Table_data.col[0].name==='empty'){generateData();}}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(InputForm,{ServerAddr:ServerAddr,Table_data:Table_data,setTable_Data:setTable_Data,Table_detail:Table_detail,setTable_Detail:setTable_Detail,ShowDetail:ShowDetail,setShowDetail:setShowDetail,inputOut:inputOut,setInputOut:setInputOut,TriggerRender:TriggerRender,tipe:params.tipe,selectquery:selectquery,checkColumnHasID:checkColumnHasID,PilihQuery:PilihQuery,detailQuery:detailQuery})});};export default Master;","map":{"version":3,"names":["useState","useParams","InputForm","myFunction","Master","props","TableQuery","recipe","query","penimbangan_to","detailquery","config","fieldname","textbox","pilih","spec","planning","material_masuk","contoh","ServerAddr","window","location","hostname","defTable","col","name","val","empty","inputOut","setInputOut","ShowDetail","setShowDetail","Table_data","setTable_Data","nilai","setNilai","Table_detail","setTable_Detail","params","selectquery","tipe","PilihQuery","detailQuery","checkColumnHasID","table","adaID","forEach","coldef","TriggerRender","cnt","generateData","fetch","then","response","json","data","alert","err"],"sources":["C:/Users/nagam/Documents/GitHub/wms_client/src/components/Master.js"],"sourcesContent":["import {useState} from \"react\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport \"./css/Master.css\";\r\n\r\n\r\nimport {InputForm,myFunction} from './InputForm'\r\n\r\nconst Master = (props) => {    \r\n    const TableQuery = \r\n    {\r\n        recipe:\r\n        {\r\n            query:\"select p.recipe_id,p.produk_id,p.material_id,pr.deskripsi produk,no,m.deskripsi material,spec from recipe p left join produk pr on p.produk_id=pr.produk_id left join material m on p.material_id=m.material_id order by pr.deskripsi,p.no\",            \r\n        },\r\n        penimbangan_to:\r\n        {\r\n            query:\"select p.*,pr.deskripsi produk,op.deskripsi operator,g.deskripsi grup from penimbangan_to p left join produk pr on p.produk_id=pr.produk_id left join grup g on p.grup_id=g.grup_id left join operator op on p.operator_id=op.operator_id\",\r\n            detailquery:\r\n            {\r\n                config:[\"bisa_tambah\"],\r\n                fieldname:\"produk\",\r\n                query:\"select deskripsi material,spec,''actual,''lot_no from recipe p left join material m on p.material_id=m.material_id where p.produk_id=@ID order by no\",\r\n                textbox:[\"material\",\"spec\",\"actual\",\"lot_no\"],\r\n                pilih:\r\n                {\r\n                    spec:\"select *,deskripsi lot_no from produk\"\r\n                },\r\n            }\r\n        },\r\n        planning:\r\n        {\r\n            query:\"select pr.deskripsi produk,p.* from planning p left join produk pr on p.produk_id=pr.produk_id\",           \r\n        },\r\n        material_masuk:\r\n        {\r\n            query:\"select * from material_masuk \",\r\n            detailquery:\r\n            {\r\n                fieldname:\"material_masuk_detail\",\r\n                query:\"select p.material_id,m.deskripsi material,lot_no,value from material_masuk_detail p left join material m on p.material_id=m.material_id where material_masuk_detail_id=@ID\",\r\n                config:[\"bisa_tambah\"],\r\n                textbox:[\"material\",\"lot_no\",\"value\"],\r\n                pilih:\r\n                {\r\n                    contoh:\"select *,deskripsi lot_no from produk\"\r\n                },\r\n                \r\n            },\r\n            pilih:\r\n            {\r\n                contoh:\"select * from contoh\"\r\n            }\r\n        },\r\n\r\n    }\r\n       \r\n    const ServerAddr = window.location.hostname\r\n    const defTable ={col:[{name:'empty'}],val:[{empty:''}]} \r\n\r\n    const [inputOut, setInputOut] = useState({empty:''});\r\n    const [ShowDetail,setShowDetail]=useState(0);\r\n    const [Table_data, setTable_Data] = useState(defTable);\r\n    const [nilai,setNilai] = useState(0);\r\n\r\n    const [Table_detail, setTable_Detail] = useState(defTable);\r\n\r\n\r\n    const params=useParams();\r\n\r\n    let selectquery=`select * from ${params.tipe}`\r\n    let PilihQuery\r\n    let detailQuery\r\n    if (params.tipe in TableQuery){\r\n        if (TableQuery[params.tipe].query){selectquery=TableQuery[params.tipe].query}\r\n        if (TableQuery[params.tipe].pilih){PilihQuery=TableQuery[params.tipe].pilih}\r\n        if (TableQuery[params.tipe].detailquery){detailQuery=TableQuery[params.tipe].detailquery}\r\n    }\r\n\r\n\r\n    function checkColumnHasID(name,table){\r\n        var adaID=false;\r\n        table.col.forEach(coldef => {\r\n            if (name+\"_id\"===coldef.name){\r\n                adaID=true;\r\n            }})\r\n        return adaID;\r\n    }\r\n\r\n    \r\n    function TriggerRender(){\r\n        var cnt = 0;\r\n        cnt=nilai+1;\r\n        setNilai(cnt);\r\n    }\r\n    const generateData = () =>{\r\n        \r\n         fetch('http://'+ServerAddr+':3001/exec/'+selectquery)\r\n        .then(response => response.json())\r\n        .then(data => {if (data){if (\"err\" in data){alert(data.err)}else{setTable_Data(data)}}});\r\n    }\r\n    if (Table_data.col){\r\n        if (Table_data.col[0].name==='empty'){\r\n            generateData();\r\n            }\r\n    }\r\n    \r\n     \r\n\r\n    return(\r\n        <div className=\"container\">\r\n            <InputForm \r\n                ServerAddr={ServerAddr}\r\n                Table_data={Table_data}\r\n                setTable_Data={setTable_Data}\r\n                Table_detail={Table_detail}\r\n                setTable_Detail={setTable_Detail}                \r\n                ShowDetail={ShowDetail}\r\n                setShowDetail={setShowDetail}\r\n                inputOut={inputOut}\r\n                setInputOut={setInputOut}\r\n                TriggerRender={TriggerRender}                \r\n                tipe={params.tipe}\r\n                selectquery={selectquery} \r\n                checkColumnHasID={checkColumnHasID}    \r\n                PilihQuery={PilihQuery}\r\n                detailQuery={detailQuery}\r\n            />\r\n            \r\n\r\n        </div>\r\n    )\r\n}\r\n \r\nexport default Master;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}